# MySQL configuration with database initialization using secret references
# This example shows different secret key names
# Prerequisites: Create secrets first:
#   kubectl create secret generic myapp-password --from-literal=password=myapp_secure_pass
#   kubectl create secret generic prod-password --from-literal=db-pass=prod_secure_pass
#   kubectl create secret generic analytics-password --from-literal=mysql-pwd=analytics_secure_pass
#
# Usage: helm install my-mysql ./ -f examples/init-job-secretref-values.yaml

fullnameOverride: "my-mysql"

auth:
  rootPassword: "mySecureRootPassword"

# Enable init job to create databases and users
initJob:
  enabled: true
  databases:
    # MyApp database - standard key name "password"
    - name: myapp
      username: myapp
      passwordSecretRef:
        secretName: myapp-password
        secretKey: password
    
    # Production database - custom key name "db-pass"
    - name: production
      username: produser
      passwordSecretRef:
        secretName: prod-password
        secretKey: db-pass
    
    # Analytics database - custom key name "mysql-pwd"
    - name: analytics
      username: analytics
      passwordSecretRef:
        secretName: analytics-password
        secretKey: mysql-pwd

primary:
  persistence:
    enabled: true
    size: 20Gi

