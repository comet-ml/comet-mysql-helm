# MySQL configuration optimized for Opik
# Usage: helm install opik-mysql ./ -f examples/opik-values.yaml

fullnameOverride: "opik-mysql"

auth:
  rootPassword: "opik"
  database: "opik"
  username: "opik"
  password: "opik"

primary:
  configuration: |-
    [mysqld]
    default-authentication-plugin=mysql_native_password
    skip-name-resolve
    explicit_defaults_for_timestamp
    port=3306
    datadir=/var/lib/mysql
    max_allowed_packet=16M
    bind-address=0.0.0.0
    character-set-server=utf8mb4
    collation-server=utf8mb4_unicode_ci
    slow_query_log=0
    long_query_time=10.0
    # Performance tuning for Opik
    innodb_buffer_pool_size=1G
    innodb_log_file_size=256M
    max_connections=200

  persistence:
    enabled: true
    size: 20Gi
    storageClass: "gp3-csi-ext4"

  resources:
    limits:
      memory: 2Gi
      cpu: 2000m
    requests:
      memory: 512Mi
      cpu: 500m

service:
  type: ClusterIP
  port: 3306

